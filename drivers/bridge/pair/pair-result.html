<!doctype html>
<html>
  <head>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' href='../../../assets/base-driver/mustard-ui.css'>
    <link rel='stylesheet' href='../../../assets/base-driver/style.css'>
    <script src='../../../assets/base-driver/vue.min.js'></script>
    <script src='../../../assets/base-driver/homey-pairing-mock.js'></script>
    <script src='assets/mock-setup.js'></script>
  </head>
  <body class='homekit-client'>
    <div id='container-pair-result'>
      <div v-if='bridge' class='panel'>
        <div class='panel-head'>
          <p class='panel-title'>Pairing successful!</p>
        </div>
        <div class='panel-body row'>
          <div class='col col-md-6 col-md-offset-3 col-lg-4 col-lg-offset-4'>
            A new HomeKit bridge has now been added to Homey!
            You can now start adding its bridged devices to Homey separately.
          </div>
        </div>
        <div class='panel-footer align-center'>
          <button @click='Homey.done()' class='button button-primary button-small button-shadow'>Done</button>
        </div>
      </div>
      <div v-else>
        <div class='spinner'></div>
      </div>
    </div>
  </body>
  <script>
    new Vue({
      el:      '#container-pair-result',
      data:    { bridge: null },
      mounted() {
        Homey.emit('getPairingTarget', null, (err, bridge) => {
          console.log('Got pairing target:', bridge);
          this.bridge = bridge;
        });
      },
    });
  </script>
</html>

